<!DOCTYPE html>
<html>
<head>
  <title>Verification | DWS - The NGO</title>
</head>
<body>
  <h2>Certificate Verification - DWS</h2>

  <label for="searchInput">Enter ID:</label>
  <input type="text" id="searchInput">
  <button onclick="searchData()">Search</button>

  <div id="dataContainer"></div>

  <script>
    function fetchData() {
      fetch('data.json') // Replace the JSON link with the local file path 'data.json'
        .then(response => response.json())
        .then(jsonData => {
          sessionStorage.setItem('jsonData', JSON.stringify(jsonData));
        })
        .catch(error => {
          console.error('An error occurred while fetching data:', error);
        });
    }

    function searchData() {
      const searchInput = document.getElementById('searchInput').value;
      const jsonData = JSON.parse(sessionStorage.getItem('jsonData'));
      const dataContainer = document.getElementById('dataContainer');

      if (jsonData) {
        if (searchInput.trim() === '') {
          dataContainer.textContent = '';
          return;
        }

        const searchData = jsonData[searchInput];

        if (searchData) {
          const html = `
            <h3>ID: ${searchInput}</h3>
            <table border="1">
              <tr>
                <th>Name</th>
                <td>${searchData.NAME}</td>
              </tr>
              <tr>
                <th>Age</th>
                <td>${searchData.AGE}</td>
              </tr>
              <tr>
                <th>Type</th>
                <td>${searchData.TYPE}</td>
              </tr>
              <tr>
                <th>Topic</th>
                <td>${searchData.TOPIC}</td>
              </tr>
              <tr>
                <th>Status</th>
                <td style="background-color: green;">${searchData.STATUS}</td>
              </tr>
            </table>
          `;
          dataContainer.innerHTML = html;

          // Create the success message
          const successMessage = `${searchData.NAME} has ${searchData.STATUS} ${searchData.TYPE} in ${searchData.TOPIC}`;

          // Speak the success message using text-to-speech
          const speech = new SpeechSynthesisUtterance(successMessage);
          window.speechSynthesis.speak(speech);
        } else {
          dataContainer.textContent = 'Candidate details are not found in NGO Database..!';
          // Speak the error message using text-to-speech
          const errorMessage = "Candidate details are not found in NGO Database..!";
          const speech = new SpeechSynthesisUtterance(errorMessage);
          window.speechSynthesis.speak(speech);
        }
      } else {
        dataContainer.textContent = 'An error occurred while fetching data. Please try again.';
      }
    }

    // Fetch data on page load
    fetchData();
  </script>
  <br><br><br>
  <hr>
  <tr>
    <ol>Last Update: 03:49 AM on 26/06/2023</ol>
    <ol>Updated by Anurag Reeta Dixit</ol>
    <ol>Type of Update: Initial</ol>
    <ol>Remarks: fetching..</ol>
  </tr>
  </tr>
</body>
</html>
